-- Load Required Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local StarterGui = game:GetService("StarterGui")
local LocalPlayer = Players.LocalPlayer

-- Notification Function
local function sendNotification(title, text, duration)
    StarterGui:SetCore("SendNotification", {
        Title = title;
        Text = text;
        Duration = duration or 5; -- Default duration is 5 seconds
    })
end

-- Create Main GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "CustomCheatGUI"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Create Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 400, 0, 500)
MainFrame.Position = UDim2.new(0.5, -200, 0.5, -250)
MainFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
MainFrame.Parent = ScreenGui
MainFrame.Visible = false
MainFrame.Active = true
MainFrame.Draggable = true

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 10)
UICorner.Parent = MainFrame

-- Title Label
local TitleLabel = Instance.new("TextLabel")
TitleLabel.Size = UDim2.new(1, 0, 0, 40)
TitleLabel.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
TitleLabel.Text = "21 Cheats"
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.TextColor3 = Color3.new(1, 1, 1)
TitleLabel.TextSize = 24
TitleLabel.Parent = MainFrame

-- Create Tab Buttons Frame
local TabFrame = Instance.new("Frame")
TabFrame.Size = UDim2.new(1, 0, 0, 40)
TabFrame.Position = UDim2.new(0, 0, 0, 40)
TabFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
TabFrame.Parent = MainFrame

local function createTabButton(name, position)
    local Button = Instance.new("TextButton")
    Button.Size = UDim2.new(0, 200, 0, 40)
    Button.Position = position
    Button.Text = name
    Button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    Button.TextColor3 = Color3.new(1, 1, 1)
    Button.Font = Enum.Font.Gotham
    Button.TextSize = 16
    Button.Parent = TabFrame
    return Button
end

local MainTabButton = createTabButton("Main (Aimbot)", UDim2.new(0, 0, 0, 0))
local VisualTabButton = createTabButton("Visual (ESP)", UDim2.new(0, 200, 0, 0))

-- Create Tab Pages
local function createPage(parent, visible)
    local Page = Instance.new("Frame")
    Page.Size = UDim2.new(1, 0, 1, -80)
    Page.Position = UDim2.new(0, 0, 0, 80)
    Page.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    Page.Visible = visible
    Page.Parent = parent
    return Page
end

local MainPage = createPage(MainFrame, true)
local VisualPage = createPage(MainFrame, false)

-- Tab Switching Logic
MainTabButton.MouseButton1Click:Connect(function()
    MainPage.Visible = true
    VisualPage.Visible = false
end)

VisualTabButton.MouseButton1Click:Connect(function()
    MainPage.Visible = false
    VisualPage.Visible = true
end)

-- Main Tab Content for Aimbot
local function createTextLabel(parent, position, text)
    local Label = Instance.new("TextLabel")
    Label.Size = UDim2.new(0, 300, 0, 30)
    Label.Position = position
    Label.Text = text
    Label.TextColor3 = Color3.new(1, 1, 1)
    Label.Font = Enum.Font.Gotham
    Label.TextSize = 14
    Label.BackgroundTransparency = 1
    Label.Parent = parent
    return Label
end

local AimbotKeyLabel = createTextLabel(MainPage, UDim2.new(0.1, 0, 0.1, 0), "Press a key to set Aimbot Toggle Key")
local CurrentKeyLabel = createTextLabel(MainPage, UDim2.new(0.1, 0, 0.2, 0), "Current Aimbot Key: [Not Set]")

local selectedAimbotKey = nil

-- Setting the Aimbot Toggle Key
UserInputService.InputBegan:Connect(function(input, gameProcessedEvent)
    if MainPage.Visible and not gameProcessedEvent then
        selectedAimbotKey = input.KeyCode
        CurrentKeyLabel.Text = "Current Aimbot Key: [" .. tostring(selectedAimbotKey) .. "]"
    end
end)

-- Aimbot Logic with Customizable Key
local aimbotEnabled = false
UserInputService.InputBegan:Connect(function(input, gameProcessedEvent)
    if input.KeyCode == selectedAimbotKey and not gameProcessedEvent then
        aimbotEnabled = not aimbotEnabled
        sendNotification("Aimbot Status", aimbotEnabled and "Aimbot Enabled" or "Aimbot Disabled")
    end
end)

-- GUI Visibility Toggle (Insert Key)
local guiVisible = false
UserInputService.InputBegan:Connect(function(input, gameProcessedEvent)
    if input.KeyCode == Enum.KeyCode.Insert and not gameProcessedEvent then
        guiVisible = not guiVisible
        MainFrame.Visible = guiVisible
        sendNotification("GUI Toggle", guiVisible and "GUI Shown" or "GUI Hidden")
    end
end)

-- Visual (ESP) Features Placeholder
local function createVisualFeature()
    -- Placeholder for ESP functionality (e.g., player outlines, distance lines, boxes)
    createTextLabel(VisualPage, UDim2.new(0.1, 0, 0.1, 0), "ESP Features Coming Soon...")
end

createVisualFeature()

-- Notify Script Load Success
sendNotification("Script Loaded", "Welcome! Use Insert key to toggle GUI.")
